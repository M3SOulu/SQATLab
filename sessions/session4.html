<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Session 4" />
  <title>Testing using Mocks</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="reveal.js/css/reveal.min.css"/>
    <style type="text/css">code{white-space: pre;}</style>
    <link rel="stylesheet" href="reveal.js/css/theme/simple.css" id="theme">
    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>
    <!--[if lt IE 9]>
    <script src="reveal.js/lib/js/html5shiv.js"></script>
    <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
    <h1 class="title">Testing using Mocks</h1>
    <h2 class="author">Session 4</h2>
    <h3 class="date"></h3>
    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>
</section>


<section id="remember-the-solid-principles" class="slide level1">
<h1>Remember the SOLID principles?</h1>
<ul>
  <li>Make your code testable</li>
</ul>
</section>
<section>
<h1>Testable code </h1>
<img src="wtf.png" alt="" />
</section>
<section id="testability" class="slide level1">
<h1>Testability</h1>
<blockquote>
<p>Degree to which a system or component facilitates the establishment of a test criteria and the performance of tests to determine whether those criteria have been met.<br />(IEEE 610.12)</p>
</blockquote>
</section>
<section class="slide level1">

<h3 id="to-achieve-testability-you-need">To achieve testability you need:</h3>
<ul>
<li><em>Controllability</em>: control the inputs</li>
<li><em>Observability</em>: check the outputs</li>
</ul>
</section>
<section class="slide level1">

<h3 id="in-reality">In reality:</h3>
<ul>
<li>a component is depends on <em>another system</em></li>
<li>Controllability is difficult!</li>
</ul>
</section>
<section id="the-curse-of-dependencies" class="slide level1">
<h1>The curse of dependencies:</h1>
<ul>
<li>hard to observe</li>
<li>difficult to setup</li>
<li>slow</li>
<li>tighten to the UI</li>
<li>not existing</li>
</ul>
</section>

<section id="remember-what-is-not-unit-testing" class="slide level1">
<h1>Remember what is <strong>not</strong> unit-testing?</h1>
</section>

<section id="test-doubles" class="slide level1">
<h3>Test doubles</h3>
<p>Test doubles stand in for the real thing</p>
<ul>
<li><strong>Stubs</strong>: Simplest implementation of an interface. For example, Stub's method typically return hardcoded values. Astub looks like a duck.</li>
<li><strong>Fakes</strong>: More sofiticated than stubs. Fake looks like a duck, walks like a duck even though it is not a duck.</li>
<li><strong>Mocks</strong>: </li>
</ul>
</section>

<section id="introducing-mock-objects" class="slide level1">
<h3>Introducing mock objects</h3>
<ul>
<li>Fake the implementation of objects that are hard to control, so you can observe them</li>
<li>Incorporate assertions for verifying expected collaboration.</li>
</ul>
</section>
<section id="mock-object" class="slide level1">
<h3>Mock object</h3>
<ul>
<li>Check method calls</li>
<li>Check arguments</li>
<li>Test interaction with <em>your</em> system</li>
</ul>
</section>
<section id="example" class="slide level1">
<h3>Example</h3>
<figure>
<img src="mock.png" />
</figure>
<ul>
<li><em>Sensor</em> is a hardware for temperature sensing</li>
<li>It sends data to <em>Logger</em></li>
<li>Testing <em>Logger</em> is cumbersome</li>
</ul>
</section>
<section class="slide level1">

<figure>
<img src="mock2.png" />
</figure>
<p>Mock out <em>Sensor</em> with an object that behaves like it!</p>
</section>
<section id="mock-lifecycle" class="slide level1">
<h3>Mock lifecycle</h3>
<ul>
<li>Create</li>
<li>Set expectations</li>
<li>Put in ready state</li>
<li>Verify expectation</li>
</ul>
</section>
<section id="how-many-mocks" class="slide level1">
<h3>How many mocks?</h3>
<img src="mockall.jpg" alt="" />
<ul>
<li class="fragment">One concrete class, mock the rest</li>
<li class="fragment">Law of Demeter aka <em>“Only talk to your friends”</em></li>
</ul>
</section>
<section id="demo" class="slide level1">
<h3>Demo</h3>
<h4 id="lets-implement-a-stocks-portfolio">Let’s implement a Stocks portfolio</h4>
<ul>
<li>You can add stocks to your portfolio</li>
<li>You can ask for the total value of your portfolio</li>
<li>The value of your stocks is given by a <strong>market</strong></li>
<li>The market service is an <strong>external</strong> dependence</li>
<li>Let’s mock the market service</li>
</ul>
</section>
    </div>
  </div>


  <script src="reveal.js/lib/js/head.min.js"></script>
  <script src="reveal.js/js/reveal.min.js"></script>

  <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: false,
        progress: true,
        history: true,
        center: true,
        theme: 'sky', // available themes are in /css/theme
        transition: 'linear', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
//          { src: 'reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; }, }
//          { src: 'reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
]});
    </script>
    </body>
</html>
